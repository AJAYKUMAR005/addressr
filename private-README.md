# addressr

Free Australian Address Validation, Search and Autocomplete

## Overview

This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project. By using the [OpenAPI-Spec](https://github.com/OAI/OpenAPI-Specification) from a remote server, you can easily generate a server stub.

### Running the server

To run the server, run:

```
npm start
```

To view the Swagger UI interface:

```
open http://localhost:8080/docs
```

This project leverages the mega-awesome [swagger-tools](https://github.com/apigee-127/swagger-tools) middleware which does most all the work.

## System requirements

Will try with digital ocean using 2GB and 3GB instances via a docker-compose. See what happens ü§∑‚Äç‚ôÇÔ∏è.

### Elastic Search:

1.375GiB mem

### Mongo DB

> Changed in version 3.2: Starting in MongoDB 3.2, the WiredTiger internal cache, by default, will use the larger of either:
>
> 60% of RAM minus 1 GB, or
> 1 GB.

On 8GiB host it ended up using 3GiB (38.24%). Need to try constraining this to find the lower limit.

### Loader

~ 752MB (while loading Victoria)

- this is prob because we keep all the street localities and localities in memory
- we could reduce this by putting them in mongo, but that could slow down the load times ü§∑‚Äç‚ôÇÔ∏è

### API Server

~

## To Do

- [x] Add search API
- [x] Index docs and create search logic
- [x] use papaparse chunks for indexing to reduce memory footprint
- [x] Expose search logic
- [x] implement pagination
  - [x] API to get the full structured address
  - [x] start up process. Have the API/Server component separate to the loader component.
- [x] server start script
- [x] loader start script
- [x] Figure out why search with < 3 chars is giving dodgy results - it's because the min ngram is 3
- [x] auth0 integration (to run the components, you need to provide credentials)
  - [x] API Server
  - [x] Loader
- [x] proper validation failure handling
- [x] telemetry capture

  - [x] create data capture server
  - What do we want to capture?
  - [x] Server/ [x] Loader
    - [x] start and stop
    - [x] who
    - [x] email status
    - [x] environment
    - [x] CPU and Memory usage
  - [x] Server
    - [x] API response times
  - [x] Loader
    - [x] Upload times
    - [x] Download times
    - [x] unzip times

- [ ] Download progress
- [ ] Clean up logging
- [ ] Versioning
- [ ] server docker image
- [ ] loader docker image
- [ ] docker compose script
- [ ] GA the beta
- [ ] update ES client
- [ ] Improve search response time
  - was approx 2.7s during data load
  - might be less when load isn't happening
- [ ] detangle loader and starter

### Premium options?

- [ ] add highlights to search results
- [ ] Aliases
- [ ] Geo
- [ ] Lowercase

# Engines of Growth

I suspect that we will need two engines of growth, despite the recommendation to stick to one. I believe we will need one engine of growth for free customers (e.g. Sticky), which will help feed the engine of growth for paying customers (e.g. paid). For instance, the sticky engine
of growth feeds the paid engine of growth, in which case the cost of running the sticky engine needs to be included in the CoA for the paid engine.

## Viral

There is no viral element to addressr.

Even if we force free users to provide links to addressr, the actual end user is unlikely to become a customer as so few end users would have a need for address lookup. Therefore the viral co-effient will always be well below 1.0.

## Paid

Purchased ads could result in free customers; this was validated early on. However this is not sustainable as the marginal profit will be below zero. More specifically, the total lifetime value of a free customer will be less that the cost of aquisition.

A sales pipeline for paid customers could be a viable engine of growth for enterprise customers, however this requires significant investment in building
that sales pipeline, in what is already a crowded market. It may make sense to to pivot to this apperoach later, if we can grow the pipeline through partners while we are running on another engine.

Another possibility could be purchesed ads resulting in free customers, which then results in paing customers. We would need to keep a close on on cost of aquisition of each free customer and then use the convertion rate to paying customer to figure out the cost of aquisition of each paying customer to figure out a price point. e.g. CoA free = $2. Converstion rate = 0.1%. CoA Paying = $2,000. Total lifetime value of paying customer must be greater than \$2,000.

## Sticky

The sticky engine of growth appears to be the most viable initially, especially for growing the free customers

## Plan of Attack

### Free customers part of CoA

1. Unsustainable paid ads to get intial traction in the market, buy awareness and kick start the next engine
   Key metrtics are:
   1. Cost of aquision
   2. Rate of aquisions
   3. Rate of attrition
      When rate of aquisions > Rate of attrition, should be able to reduce cost of aquision
2. Sticky engine of growth to grow free customers. We should be able to turn off ads and continue to grow.
   Key metrics are:
   1. Rate of aquisions
   2. Rate of attrition
3. Paid engine of growth to grow paying customers. The cost of running the engine of growth for the free customers is part of the CoA for the paying customers.
   Key metrics are:
   1. Cost of Aquisition of each free customer
   2. Coverstion rate from free to paid
   3. TLV of paid customers

### Partner Play

I don't like this.

Growing a partner network for other products was painful, however I wasn't thinkning about the engine of growth for the network. This engine of growth for growing the partner network needs to be factored into the blow.

It feels very complicated, which is a smell.

1. Unsustainable paid ads to get intial traction in the market, buy awareness and kick start the next engine
2. Sticky engine of growth to grow free customers. We should be able to turn off ads and continue to grow.
   1. ??? engine of growth for the partner network
   2. sticky would be more partners joining than leaving
   3. paid would be sales pipeline for parnters, having a TLV of partners (sales they generate?)
   4. viral is not viable (one partner doe snot beget another partner)
3. Paid engine of growth to grow paying customers, utilizing partners.
